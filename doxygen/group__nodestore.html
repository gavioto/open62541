<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.7.6.1"/>

<title>NodeStore</title>
<script type="text/javascript" src="jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="load-style.js"></script>



<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">NodeStore</div>  </div>
<div class="ingroups"><a class="el" href="group__server.html">Server</a></div></div><!--header-->
<div class="contents">

<p>The nodestore is the central storage for nodes in the UA address space. Internally, the nodestore is realised as hash-map where nodes are stored and retrieved with their nodeid.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#ga12eeea5c76d7be3c6253dd31508501ec">UA_NODESTORE_INSERT_UNIQUE</a>&#160;&#160;&#160;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#ga72e8d08a092ae7ba95276f92b53e804b">UA_NODESTORE_INSERT_GETMANAGED</a>&#160;&#160;&#160;2</td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#gaf4a4a284506499e2a78e9a8814a88161">UA_NodeStore_nodeVisitor</a> )(const <a class="el" href="group__ua__types__generated.html#gacd31311b3bcf93b2fac0750f81e23b9e">UA_Node</a> *node)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">A function that can be evaluated on all entries in a namespace via UA_NodeStore_iterate. Note that the visitor is read-only on the nodes.  <a href="#gaf4a4a284506499e2a78e9a8814a88161"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__types.html#ga31190895fd16b9bda5a2b80c970875f6">UA_StatusCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#ga9a33aa10617785418d87d13c92315ef3">UA_NodeStore_new</a> (<a class="el" href="ua__server_8h.html#a6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> **result)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new namespace.  <a href="#ga9a33aa10617785418d87d13c92315ef3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#ga754d4517ad53cb4286592713d9981152">UA_NodeStore_delete</a> (<a class="el" href="ua__server_8h.html#a6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *ns)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete the namespace and all nodes in it.  <a href="#ga754d4517ad53cb4286592713d9981152"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__types.html#ga31190895fd16b9bda5a2b80c970875f6">UA_StatusCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#gab5ac9feeaec00b315a02b802e637c0c6">UA_NodeStore_insert</a> (<a class="el" href="ua__server_8h.html#a6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *ns, <a class="el" href="group__ua__types__generated.html#gacd31311b3bcf93b2fac0750f81e23b9e">UA_Node</a> **node, <a class="el" href="group__types.html#gac31865e6fcb9a042b5eaf5a5bd4ed30d">UA_Byte</a> flags)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Insert a new node into the namespace.  <a href="#gab5ac9feeaec00b315a02b802e637c0c6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__types.html#ga31190895fd16b9bda5a2b80c970875f6">UA_StatusCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#ga6f17e438ced10fd4c1f035a930acd23a">UA_NodeStore_remove</a> (<a class="el" href="ua__server_8h.html#a6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *ns, const <a class="el" href="structUA__NodeId.html">UA_NodeId</a> *nodeid)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a node from the namespace. Always succeeds, even if the node was not found.  <a href="#ga6f17e438ced10fd4c1f035a930acd23a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__types.html#ga31190895fd16b9bda5a2b80c970875f6">UA_StatusCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#gad4fb156e62f62fe39c6550b586d801c5">UA_NodeStore_get</a> (const <a class="el" href="ua__server_8h.html#a6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *ns, const <a class="el" href="structUA__NodeId.html">UA_NodeId</a> *nodeid, const <a class="el" href="group__ua__types__generated.html#gacd31311b3bcf93b2fac0750f81e23b9e">UA_Node</a> **managedNode)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve a node (read-only) from the namespace. Nodes are immutable. They can only be replaced. After the Node is no longer used, the locked entry needs to be released.  <a href="#gad4fb156e62f62fe39c6550b586d801c5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#gaafd9cf3d444706dffe43d38ae76fe2b8">UA_NodeStore_release</a> (const <a class="el" href="group__ua__types__generated.html#gacd31311b3bcf93b2fac0750f81e23b9e">UA_Node</a> *managed)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Release a managed node. Do never insert a node that isn't stored in a namespace.  <a href="#gaafd9cf3d444706dffe43d38ae76fe2b8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__nodestore.html#ga3bf247b62795b6a53bb551124a41e4f1">UA_NodeStore_iterate</a> (const <a class="el" href="ua__server_8h.html#a6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *ns, <a class="el" href="group__nodestore.html#gaf4a4a284506499e2a78e9a8814a88161">UA_NodeStore_nodeVisitor</a> visitor)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterate over all nodes in a namespace.  <a href="#ga3bf247b62795b6a53bb551124a41e4f1"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<p>The nodestore is the central storage for nodes in the UA address space. Internally, the nodestore is realised as hash-map where nodes are stored and retrieved with their nodeid. </p>
<p>The nodes in the nodestore are immutable. To change the content of a node, it needs to be replaced as a whole. When a node is inserted into the namespace, it gets replaced with a pointer to a managed node. Managed nodes shall never be freed by the user. This is done by the namespace when the node is removed and no readers (in other threads) access the node. </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ga72e8d08a092ae7ba95276f92b53e804b"></a><!-- doxytag: member="ua_nodestore.h::UA_NODESTORE_INSERT_GETMANAGED" ref="ga72e8d08a092ae7ba95276f92b53e804b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group__nodestore.html#ga72e8d08a092ae7ba95276f92b53e804b">UA_NODESTORE_INSERT_GETMANAGED</a>&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ga12eeea5c76d7be3c6253dd31508501ec"></a><!-- doxytag: member="ua_nodestore.h::UA_NODESTORE_INSERT_UNIQUE" ref="ga12eeea5c76d7be3c6253dd31508501ec" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="group__nodestore.html#ga12eeea5c76d7be3c6253dd31508501ec">UA_NODESTORE_INSERT_UNIQUE</a>&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="gaf4a4a284506499e2a78e9a8814a88161"></a><!-- doxytag: member="ua_nodestore.h::UA_NodeStore_nodeVisitor" ref="gaf4a4a284506499e2a78e9a8814a88161" args=")(const UA_Node *node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="group__nodestore.html#gaf4a4a284506499e2a78e9a8814a88161">UA_NodeStore_nodeVisitor</a>)(const <a class="el" href="group__ua__types__generated.html#gacd31311b3bcf93b2fac0750f81e23b9e">UA_Node</a> *node)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A function that can be evaluated on all entries in a namespace via UA_NodeStore_iterate. Note that the visitor is read-only on the nodes. </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga754d4517ad53cb4286592713d9981152"></a><!-- doxytag: member="ua_nodestore.h::UA_NodeStore_delete" ref="ga754d4517ad53cb4286592713d9981152" args="(UA_NodeStore *ns)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__nodestore.html#ga754d4517ad53cb4286592713d9981152">UA_NodeStore_delete</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ua__server_8h.html#a6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *&#160;</td>
          <td class="paramname"><em>ns</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Delete the namespace and all nodes in it. </p>

</div>
</div>
<a class="anchor" id="gad4fb156e62f62fe39c6550b586d801c5"></a><!-- doxytag: member="ua_nodestore.h::UA_NodeStore_get" ref="gad4fb156e62f62fe39c6550b586d801c5" args="(const UA_NodeStore *ns, const UA_NodeId *nodeid, const UA_Node **managedNode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__types.html#ga31190895fd16b9bda5a2b80c970875f6">UA_StatusCode</a> <a class="el" href="group__nodestore.html#gad4fb156e62f62fe39c6550b586d801c5">UA_NodeStore_get</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ua__server_8h.html#a6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structUA__NodeId.html">UA_NodeId</a> *&#160;</td>
          <td class="paramname"><em>nodeid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__ua__types__generated.html#gacd31311b3bcf93b2fac0750f81e23b9e">UA_Node</a> **&#160;</td>
          <td class="paramname"><em>managedNode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve a node (read-only) from the namespace. Nodes are immutable. They can only be replaced. After the Node is no longer used, the locked entry needs to be released. </p>

</div>
</div>
<a class="anchor" id="gab5ac9feeaec00b315a02b802e637c0c6"></a><!-- doxytag: member="ua_nodestore.h::UA_NodeStore_insert" ref="gab5ac9feeaec00b315a02b802e637c0c6" args="(UA_NodeStore *ns, UA_Node **node, UA_Byte flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__types.html#ga31190895fd16b9bda5a2b80c970875f6">UA_StatusCode</a> <a class="el" href="group__nodestore.html#gab5ac9feeaec00b315a02b802e637c0c6">UA_NodeStore_insert</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ua__server_8h.html#a6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ua__types__generated.html#gacd31311b3bcf93b2fac0750f81e23b9e">UA_Node</a> **&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__types.html#gac31865e6fcb9a042b5eaf5a5bd4ed30d">UA_Byte</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Insert a new node into the namespace. </p>
<p>With the UNIQUE flag, the node is only inserted if the nodeid does not already exist. With the GETMANAGED flag, the node pointer is replaced with the managed pointer. Otherwise, it is set to UA_NULL. </p>

</div>
</div>
<a class="anchor" id="ga3bf247b62795b6a53bb551124a41e4f1"></a><!-- doxytag: member="ua_nodestore.h::UA_NodeStore_iterate" ref="ga3bf247b62795b6a53bb551124a41e4f1" args="(const UA_NodeStore *ns, UA_NodeStore_nodeVisitor visitor)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__nodestore.html#ga3bf247b62795b6a53bb551124a41e4f1">UA_NodeStore_iterate</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="ua__server_8h.html#a6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__nodestore.html#gaf4a4a284506499e2a78e9a8814a88161">UA_NodeStore_nodeVisitor</a>&#160;</td>
          <td class="paramname"><em>visitor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Iterate over all nodes in a namespace. </p>

</div>
</div>
<a class="anchor" id="ga9a33aa10617785418d87d13c92315ef3"></a><!-- doxytag: member="ua_nodestore.h::UA_NodeStore_new" ref="ga9a33aa10617785418d87d13c92315ef3" args="(UA_NodeStore **result)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__types.html#ga31190895fd16b9bda5a2b80c970875f6">UA_StatusCode</a> <a class="el" href="group__nodestore.html#ga9a33aa10617785418d87d13c92315ef3">UA_NodeStore_new</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ua__server_8h.html#a6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> **&#160;</td>
          <td class="paramname"><em>result</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a new namespace. </p>

</div>
</div>
<a class="anchor" id="gaafd9cf3d444706dffe43d38ae76fe2b8"></a><!-- doxytag: member="ua_nodestore.h::UA_NodeStore_release" ref="gaafd9cf3d444706dffe43d38ae76fe2b8" args="(const UA_Node *managed)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__nodestore.html#gaafd9cf3d444706dffe43d38ae76fe2b8">UA_NodeStore_release</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__ua__types__generated.html#gacd31311b3bcf93b2fac0750f81e23b9e">UA_Node</a> *&#160;</td>
          <td class="paramname"><em>managed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Release a managed node. Do never insert a node that isn't stored in a namespace. </p>

</div>
</div>
<a class="anchor" id="ga6f17e438ced10fd4c1f035a930acd23a"></a><!-- doxytag: member="ua_nodestore.h::UA_NodeStore_remove" ref="ga6f17e438ced10fd4c1f035a930acd23a" args="(UA_NodeStore *ns, const UA_NodeId *nodeid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__types.html#ga31190895fd16b9bda5a2b80c970875f6">UA_StatusCode</a> <a class="el" href="group__nodestore.html#ga6f17e438ced10fd4c1f035a930acd23a">UA_NodeStore_remove</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ua__server_8h.html#a6a58ef1e1f4671734067273d69a4dec6">UA_NodeStore</a> *&#160;</td>
          <td class="paramname"><em>ns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structUA__NodeId.html">UA_NodeId</a> *&#160;</td>
          <td class="paramname"><em>nodeid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Remove a node from the namespace. Always succeeds, even if the node was not found. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->


<address class="footer"><small>
Generated on Thu Nov 6 2014 16:04:10 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
